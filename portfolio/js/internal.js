"use strict";document.addEventListener("DOMContentLoaded",function(){function d(a,i){var s,e=new MutationObserver(function(e){var t=$.makeArray(a.classList),e=e[0].oldValue,e=s||(e?e.split(" "):[]),n=t.filter(r,e),o=e.filter(r,t);i(n,o,t,e),s=t});return e.observe(a,{attributes:!0,attributeOldValue:!0}),e.old=s,e;function r(e){return this.indexOf(e)<0}}var e,t,n,o,a,i,s,r,c=["bebe","beeb","ebeb","ebbe"],u=".js-on-visible",p="animated",f=".js-is-visible",m="hold-outside-viewport";$(document).ready(function(){function e(){i?(o=arguments,a=this):(i=!0,setTimeout(function(){i=!1,t.apply(a,o),o=a=null},n))}t=l,i=!(n=200);var t,n,o,a,i,s=$(u+","+f);function l(e,t){var n=window.innerHeight,o=.3*n,a=.7*n;function i(e){e=e.getBoundingClientRect(),e=[["b",o],["b",a],["e",e.top],["e",e.bottom]].sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]}).join("");return 0<=c.indexOf(e)}$(".js-on-visible.animated").each(function(){!this.classList.contains(m)&&i(this)&&this.classList.remove(p)}),o=0,a=n,$(f).each(function(){this.classList.toggle("in-viewport",!this.classList.contains(m)&&i(this))})}s.length&&($(window).off("scroll",e),$(".os-viewport").on("scroll",e),l(),s.each(function(){function a(t,e){return e.every(function(e){return 0<=t.indexOf(e)})}var e,i,s,r;e=this,s=i=l,r=m.split(" "),i="function"==typeof i?i:function(){},s="function"==typeof s?s:function(){},d(e,function(e,t,n,o){1<r.length?!a(o,r)&&a(n,r)?i():a(o,r)&&!a(n,r)&&s():a(e,r)?i():a(t,r)&&s()})}))}),$(document).ready(function(){var s=$(".b-page-wrapper"),r=$(".b-popup"),t=$(".b-popup__content"),l=-1!==navigator.userAgent.toLowerCase().indexOf("windows");function n(){r.hasClass("open")&&(s.removeClass("no-scroll no-touch windows"),r.removeClass("open"),r.stop().fadeOut(300))}function e(){$(this).trigger("popup.open",[void 0]);var e,t,n,o,a,i=$(".b-popup[data-popup='"+$(this).attr("data-popup")+"']");0<i.length&&(l&&(e="Height",t=".b-page-wrapper",n=document,o=n.body,t=n.querySelector(t),a="client"+e,e="scroll"+e,/CSS/.test(n.compatMode)?t[a]<t[e]:o[a]<o[e])&&s.addClass("windows"),r.removeClass("open"),r.fadeOut(300),s.addClass("no-scroll no-touch"),i.addClass("open"),i.css("display","flex").hide().fadeIn(300),$("body").trigger("popupOpenVideo"))}$(".js-open-popup").on("popup.onClose",function(e){n()}),$(document).on("click",".js-open-popup",function(){$(this).trigger("popup.onOpen")}),$(".js-open-popup").on("popup.onOpen",function(){e.call(this)}),window.openPopUp=e,$(document).on("click",".js-close-popup",function(){n(),$(".js-menu-in-popup-back").length&&$(".js-menu-in-popup-back").trigger("click")}),$(document).on("keydown",function(e){27===e.keyCode&&n()}),$(document).mouseup(function(e){!r.hasClass("open")||t.is(e.target)||0!==t.has(e.target).length||n()})}),l=$(".js-anchor-link"),e=$(".js-burger"),t=$(".b-page-wrapper"),l&&e&&l.click(function(){$(this).attr("href");e.removeClass("open"),t.removeClass("no-scroll")}),l=document.querySelector(".js-burger-btn-open"),h=document.querySelector(".js-burger-btn-close"),n=document.querySelector(".b-page-wrapper"),o=document.querySelector(".js-burger"),l.addEventListener("click",function(){o.classList.add("open"),n.classList.add("no-scroll")}),h.addEventListener("click",function(){o.classList.remove("open"),n.classList.remove("no-scroll")}),i=a=void 0,window.innerWidth<768&&(i=new Swiper(".js-slider-about",{pagination:{el:".swiper-pagination",clickable:!0},speed:500,slidesPerView:"auto",spaceBetween:16})),window.addEventListener("resize",function(){768<=window.innerWidth&&a&&(a=!1,i.destroy()),window.innerWidth<768&&!a&&(i=new Swiper(".js-slider-about",{pagination:{el:".swiper-pagination",clickable:!0},speed:500,slidesPerView:"auto",spaceBetween:16}),a=!0)}),$(".js-slider-portfolio").length&&new Swiper(".js-slider-portfolio",{speed:500,slidesPerView:"auto",spaceBetween:16,loop:!0,allowTouchMove:!0,navigation:{nextEl:".b-portfolio .swiper-button-next",prevEl:".b-portfolio .swiper-button-prev"},breakpoints:{768:{spaceBetween:24,slidesPerView:"auto",allowTouchMove:!0},1280:{spaceBetween:0,slidesPerView:1,allowTouchMove:!1}}}),$(".js-tel").length&&$(".js-tel").inputmask({mask:"+7 (999) 999-99-99",showMaskOnHover:!1}),$(".js-form-validate").length&&(s=function(e){return Boolean(e.data("button-dis"))},r=function(e,t){var n=e.find('button[type="submit"]');s(e)&&(n.prop("disabled",t),n.toggleClass("disabled",t))},$.extend($.validator.messages,{required:"This field is required",name:"Enter a name",phone:"Enter a phone",remote:"Please enter a valid value.",email:"Enter your email address",maxlength:$.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:$.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:$.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:$.validator.format("Пожалуйста, введите число от {0} до {1}."),max:$.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:$.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),$.validator.addMethod("text-name",function(e,t){return Boolean(e)},$.validator.messages.name),$.validator.addMethod("tel",function(e,t){return/^(\+7|7|8)?[\s\-]?\(?[0-9][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(e)},$.validator.messages.phone),$.validator.addMethod("email",function(e,t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},$.validator.messages.email),$.validator.addMethod("js-message",function(e,t){return Boolean(e)},$.validator.messages.required),$.validator.addMethod("js-chars-only",function(e,t){return 0===e.replace(/[^+\d]/g,"").length},"The field cannot contain numbers"),jQuery.validator.addClassRules({"js-name":{"text-name":!0},"js-tel":{tel:!0},"js-email":{email:!0},"js-message":{"js-message":!0}}),$(".js-form-validate").each(function(){var n=$(this),o=n.validate({ignore:".ignore, :hidden",submitHandler:function(e){var t=void 0===n.data("valid-clear")||"true"===n.data("valid-clear");return(void 0===n.data("data-button-blocked")||"true"===n.data("data-button-blocked"))&&(n.find('button[type="submit"]').addClass("disabled"),n.find('button[type="submit"]').prop("disabled",!0)),t&&setTimeout(function(){$(".js-filename").trigger("file.clear"),$(".js-select-form").trigger("select2.clear"),e.reset(),o.resetForm()},100),r(n,!0),!1}});s(n)&&(r(n,!0),$(this).on("blur keyup change","input, select",function(e){var t=!o.checkForm();r(n,t)}))}),$(".js-input-number").on("keypress",function(e){if(!parseInt(e.key)&&"0"!==e.key)return!1}));var l,h,v,b=!1;function g(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("active")})}$(".js-form-validate").on("submit",function(e){var n,t;if(e.preventDefault(),!$(this).validate().form())return!1;b||(e=$(this),n=$('.b-popup[data-popup="confirmation"]'),t=e.find(".js-popup-text").attr("text-popup"),n.find(".b-title").text(t),console.log("popup",n),t=new FormData(e.get(0)),b=!0,$.ajax({url:e.attr("action"),method:e.attr("method"),contentType:!1,processData:!1,enctype:"multipart/form-data",data:t,success:function(e){var t;openPopUp.call(n[0]),(t=form)[0].reset(),t.find("input").each(function(e,t){return $(t).focusout()}),t.validate().resetForm(),b=!1},error:function(e,t){openPopUp.call(n[0]),b=!1,console.error("submitForm",t)}}))}),l=document.querySelectorAll(".js-animate"),h=document.querySelectorAll(".js-animate-2"),v=document.querySelectorAll(".js-animate-3"),l.forEach(function(e){new IntersectionObserver(g,{threshold:[0]}).observe(e)}),h.forEach(function(e){new IntersectionObserver(g,{threshold:[.7]}).observe(e)}),768<=window.innerWidth&&window.innerWidth<1280&&v.forEach(function(e){e.classList.add("fadeLeftRight"),new IntersectionObserver(g,{threshold:[0]}).observe(e)}),1280<=window.innerWidth&&v.forEach(function(e,t){0===t&&e.classList.add("fadeLeftRight"),1===t&&(e.classList.add("fadeLeftRight"),e.classList.remove("delay-200")),2===t&&(e.classList.add("fadeRightLeft"),e.classList.remove("delay-400")),new IntersectionObserver(g,{threshold:[.12]}).observe(e)})});